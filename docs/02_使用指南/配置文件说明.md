# 配置文件说明

## 📁 为什么有两个 config 文件？

项目中有两个配置文件：

### 1. `config.example.yaml` - 原始配置（保留作为参考）
- **用途:** 示例/模板配置
- **RSS源:** 52个（但28个已失效）
- **特点:** 包含所有可能的配置选项和注释说明
- **推荐:** 🚫 **不推荐使用**（包含大量失效链接）

### 2. `config.fixed.yaml` - 修复版配置 ✅ **推荐使用**
- **用途:** 生产环境配置
- **RSS源:** 36个（全部测试通过）
  - 原有24个可用源
  - 新增12个新兴市场专题源
- **优化:** 
  - ✅ 所有RSS链接已验证可用
  - ✅ Redis存储优化（1GB，保留完整字段）
  - ✅ 自动导出机制（防止内存溢出）
  - ✅ 新增"新兴市场"分类

---

## 🎯 如何使用

### 方式 1: 直接使用修复版配置（推荐）

```bash
# 复制修复版配置为主配置
cp config.fixed.yaml config.yaml

# 根据需要修改 API keys
# 编辑 config.yaml，填入你的:
# - Reddit API credentials
# - NewsAPI key
# - (可选) Twitter API credentials
```

### 方式 2: 从示例配置开始

```bash
# 复制示例配置
cp config.example.yaml config.yaml

# 手动修复（不推荐，工作量大）
# - 移除28个失效的RSS源
# - 调整Redis配置
# - 添加自动导出配置
```

---

## 📊 配置对比

| 项目 | config.example.yaml | config.fixed.yaml |
|------|---------------------|-------------------|
| **RSS源数量** | 52个 | 36个 |
| **有效RSS源** | 24个 (46.2%) | 36个 (100% ✅) |
| **Redis策略** | 基础配置 | 优化配置 |
| **max_keep** | 10000条 | 500000条 (1GB) |
| **slim_mode** | 未配置 | false (保留完整字段) |
| **自动导出** | 未配置 | ✅ 已配置 |
| **新兴市场源** | 0个 | 7个 🆕 |
| **数据量/天** | ~960篇 | ~1440篇 |

---

## 🆕 新增内容（config.fixed.yaml）

### 新增RSS分类
- **emerging_markets (新兴市场)** - 7个源
  - FinanceAsia Latest
  - Emergent Economics
  - BNP Paribas Economic Research
  - Livemint Markets (India)
  - Mizuho Financial Group
  - Asia Times Business
  - Opalesque Global Markets

### 新增国际财经源
- Reuters Financial News
- CNBC Investing & Finance
- Nasdaq Markets
- FT Emerging Markets

### 优化配置
```yaml
redis:
  storage_optimization:
    max_keep: 500000      # 1GB容量
    slim_mode: false      # 保留完整17字段
    data_ttl: null        # 不自动过期

data_management:
  auto_export:
    memory_threshold_mb: 900   # 900MB触发
    retention_days: 90         # 保留3个月
```

---

## ✅ 推荐配置

**生产环境使用：**
```bash
config.fixed.yaml  ✅ 推荐
```

**原因：**
1. ✅ 所有RSS源已测试通过
2. ✅ Redis配置优化（1GB，完整字段）
3. ✅ 自动导出防止内存溢出
4. ✅ 新增新兴市场专题源
5. ✅ 数据保留90天，适合研究分析

---

## 🔧 后续维护

### 定期验证RSS链接
```bash
# 验证现有配置
python validate_rss_urls.py

# 验证新增链接
python validate_new_rss.py
```

### 更新配置
如果发现失效链接：
1. 运行验证脚本
2. 移除失效源或寻找替代源
3. 更新 `config.fixed.yaml`
4. 提交到版本控制

---

**建议:** 删除 `config.example.yaml` 或重命名为 `config.example.old.yaml`，避免混淆 ✅
